#!/usr/bin/env python3
from __future__ import annotations

import argparse
from pathlib import Path


IMAGE_EXTS = {".png", ".jpg", ".jpeg", ".tif", ".tiff", ".bmp", ".webp"}
PDF_EXTS = {".pdf"}
TEXT_EXTS = {".txt", ".md", ".rtf", ".docx", ".doc", ".odt", ".html", ".htm", ".tex", ".epub"}


def classify(path: Path) -> str:
    ext = path.suffix.lower()
    if ext in IMAGE_EXTS:
        return "image"
    if ext in PDF_EXTS:
        return "pdf"
    if ext in TEXT_EXTS:
        return "text"
    return "unknown"


def main() -> int:
    ap = argparse.ArgumentParser(description="Classify a file for ingestion: image/pdf/text/unknown")
    ap.add_argument("paths", nargs="+", help="Paths to classify")
    args = ap.parse_args()
    for p in args.paths:
        kind = classify(Path(p))
        print(f"{kind}\t{p}")
    return 0


if __name__ == "__main__":
    raise SystemExit(main())

